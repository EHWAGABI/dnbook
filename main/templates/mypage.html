{% extends 'base.html' %}
{% block content %}
{% load staticfiles %}
    <head>
        <link rel="stylesheet" type="text/css" href="{% static 'css/mypage.css' %}">
    </head>
<div class='mypage-body'>
    <div class='mypage-header'>• 프로필 편집</div>
    <div class="row">
        <div class="col-3">
            <img src="{% static 'images/basic-profile-img.png' %}" class='mypage-prof-img'>
            {% if store_name %}
                <div class='mypage-userid'>{{store_name}}</div>
            {% endif %}
            <div class='mypage-userid'>{{user.username}}</div>
        </div>
        <div class="col">
            <h2>비밀번호는 변경을 원할 시에만 입력하세요.</h2>
            <form>
                <div class='mypage-profile-info'>닉네임 {{profile.nickname}}</div>
                <div class='mypage-profile-info'>이메일 {{profile.email}}</div>
                <div class='mypage-profile-info'>
                    <input class='mypage-profile-input' type='password' name='password1' placeholder='비밀번호 변경'/>
                </div>
                <div class='mypage-profile-info'>
                    <input class='mypage-profile-input' type='password' name='password2' placeholder='비밀번호 확인'/>
                </div>
                <input type='submit' class='mypage-submit-btn' value='SAVE' disabled/>
            </form>
        </div>
    </div>

    <div class='mypage-header'>나의 스탬프</div>
    {% if store_name %}
        <h3><div id="light" class="white_content">아이디를 입력해주세요 :) <br><br>
            <form method="GET" action="{% url 'stamppush' %}">  
                <input name="userid" class="form-control-plaintext"/>
                <input type="radio" name="count" value="1" id="1"><label for="1">만원이상</label>
                <input type="radio" name="count" value="2" id="2"><label for="2">2만원이상</label>
                <input type="radio" name="count" value="3" id="3"><label for="3">3만원이상</label>
                <input type="submit" value="찍어주기!">
            </form> <br><br>
    {% else %}
    <h1>스탬프 수: {{stamp}}</h1>
    <h1>현재 level {{level}} 입니다.</h1>
        {% if next %}
        <h1>{{more}}개 더 모으면 level {{next}}!!</h1>
        {% else %}
        <h1>축하합니다! 최고 레벨입니다!!</h1>
        {% endif %}
    {% endif %}


    <div class='mypage-tab'>
        <ul class="nav nav-justified nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item nav-item-bookmark">
            <a class="nav-link active" id="pills-bookmark-tab" data-toggle="pill" href="#pills-bookmark" role="tab" aria-controls="pills-bookmark" aria-selected="true">즐겨찾기</a>
            </li>
            {% if store_name %}
                <li class="nav-item nav-item-mypost">
                    <a class="nav-link" id="pills-mypost-tab" data-toggle="pill" href="#pills-mypost" role="tab" aria-controls="pills-mypost" aria-selected="false">내가 쓴 글</a>
                </li>
            {% endif %}
            <li class="nav-item nav-item-mycomment">
                <a class="nav-link" id="pills-mycomment-tab" data-toggle="pill" href="#pills-mycomment" role="tab" aria-controls="pills-mycomment" aria-selected="false">내가 쓴 댓글</a>
            </li>
        </ul>
        <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-bookmark" role="tabpanel" aria-labelledby="pills-bookmark-tab">
            {% for scrap in scraps %}
            >> <a href="{%url 'storedetail' scrap.store.bookstore_id%}">{{scrap.store}}</a><br>
            {% endfor %}
        </div>
        <div class="tab-pane fade" id="pills-mypost" role="tabpanel" aria-labelledby="pills-mypost-tab">
            <table>
                <thead>
                    <tr>
                        <th>제목</th>
                        <th>시작 날짜</th>
                        <th>책방 이름</th>
                    </tr>
                </thead>
                <tbody>
                    {% for culture in cultures %}
                    <tr onClick="location.href='{%url 'culturedetail' culture.id%}'">
                        <td>{{culture.title}}</td>
                        <td>{{culture.start_time}}</td>
                        <td>{{culture.store.name}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="pills-mycomment" role="tabpanel" aria-labelledby="pills-mycomment-tab">
            <table>
                <thead>
                    <tr>
                        <th>제목</th>
                        <th>댓글 내용</th>
                    </tr>
                </thead>
                <tbody>
                    {% for comment in comments %}
                    <tr onClick="location.href='{%url 'culturedetail' comment.culture.id%}'">
                        <td>{{comment.culture.title}}</td>
                        <td>{{comment.content}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        </div>
    </div>



    {% comment %} <h3>스크랩 한 책방</h3>
    {% for scrap in scraps %}
    >> <a href="{%url 'storedetail' scrap.store.bookstore_id%}">{{scrap.store}}</a><br>
    {% endfor %}
    <br> {% endcomment %}
</div>

<button onclick="del_user();">탈퇴하기</button>
<script type="text/javascript">
    function del_user(){
        let tf = confirm("정말로 탈퇴하시겠습니까?");
        if (tf === true){
            location.href="{%url 'del_user' %}";
            alert("성공적으로 탈퇴되었습니다.");
        };
    };
</script>
{% endblock %}